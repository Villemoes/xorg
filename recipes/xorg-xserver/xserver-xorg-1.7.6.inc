#SRC_URI += "file://crosscompile.patch"

# Misc build failure for master HEAD
#SRC_URI += "file://fix_open_max_preprocessor_error.patch"
SRC_URI += "file://0001-fbdevhw-Remove-the-non-sysfs-hack-for-mapping-from-P.patch"

SRC_URI += "file://001_fedora_extramodes.patch"
SRC_URI += "file://02_Add-libgcrypt-and-libnettle-as-options-for-sha1.diff"
SRC_URI += "file://05_only_call_gamma_set_if_nonnull.diff"
SRC_URI += "file://06_dont_trap_access_to_timer_and_keyboard.diff"
SRC_URI += "file://07-xfree86-fix-build-with-xv-disabled.diff"
SRC_URI += "file://08-config-xorg-conf-d.diff"
SRC_URI += "file://09-inputclass-sans-abi9.diff"
SRC_URI += "file://10-config-libudev-backend.diff"
SRC_URI += "file://11-xfree86-fix-video-fallback.diff"
SRC_URI += "file://12-xfree86-dont-complain-about-missing-coredevices.diff"
SRC_URI += "file://13-unbreak-input-abi.diff"
SRC_URI += "file://14-tone-down-nidr-errors.diff"
SRC_URI += "file://15-keep-udev-x11-driver.diff"
SRC_URI += "file://19-exa-handle-pixmap-create-destroy-in-lower-layers.diff"
SRC_URI += "file://100_rethrow_signals.patch"
SRC_URI += "file://106_nouveau_autodetect.patch"
SRC_URI += "file://109_fix-swcursor-crash.patch"
SRC_URI += "file://110_findglyphbyhash-fix.patch"
SRC_URI += "file://111_armel-drv-fallbacks.patch"
SRC_URI += "file://112_xaa-fbcomposite-fix-negative-size.patch"
SRC_URI += "file://113_quell_nouveau_aiglx.patch"
SRC_URI += "file://115_xext_fix_cursor_ref_counting.patch"
SRC_URI += "file://116_fix_typos_in_swap_functions.patch"
SRC_URI += "file://118_xkb_fix_garbage_init.patch"
SRC_URI += "file://121_only_switch_vt_when_active.diff"
SRC_URI += "file://122_xext_fix_card32_overflow_in_xauth.patch"
SRC_URI += "file://123_exa_sys_ptr_nullpointer_check.patch"
SRC_URI += "file://124_make_xinerama_use_signed_coordinates.patch"
SRC_URI += "file://157_check_null_modes.patch"
SRC_URI += "file://162_null_crtc_in_rotation.patch"
SRC_URI += "file://164_trap-aspect-ratios.patch"
SRC_URI += "file://165_man_xorg_conf_no_device_ident.patch"
SRC_URI += "file://166_nullptr_xinerama_keyrepeat.patch"
SRC_URI += "file://167_nullptr_xisbread.patch"
SRC_URI += "file://168_glibc_trace_to_stderr.patch"
SRC_URI += "file://169_mipointer_nullptr_checks.patch"
SRC_URI += "file://172_cwgetbackingpicture_nullptr_check.patch"
SRC_URI += "file://184_virtual_devices_autodetect.patch"
SRC_URI += "file://187_edid_quirk_hp_nc8430.patch"
SRC_URI += "file://188_default_primary_to_first_busid.patch"
SRC_URI += "file://189_xserver_1.5.0_bg_none_root.patch"
SRC_URI += "file://190_cache-xkbcomp_output_for_fast_start_up.patch"
SRC_URI += "file://191-Xorg-add-an-extra-module-path.patch"
SRC_URI += "file://196_xvfb-fbscreeninit-handling.patch"
SRC_URI += "file://197_xvfb-randr.patch"
SRC_URI += "file://198_nohwaccess.patch"
SRC_URI += "file://199_xfvb-help-typo.patch"
SRC_URI += "file://200_randr-null.patch"
SRC_URI += "file://201_dixFreePrivates.patch"
SRC_URI += "file://202_trappedMouseCursor.patch"
SRC_URI += "file://203_fix-xtest-lp607071.patch"
SRC_URI += "file://204_scale_high_resolution.patch"
SRC_URI += "file://205_CVE-2011-4028.patch"
SRC_URI += "file://206_CVE-2011-4029.patch"
SRC_URI += "file://207_CVE-2010-4818.patch"
SRC_URI += "file://208_CVE-2010-4819.patch"
SRC_URI += "file://209_fixes-crash-XIQueryDevice.patch"


do_install[postfuncs] += "do_install_fix"
do_install_fix () {
        cp -vr ${D}${libdir}/xorg/modules/linux/. ${D}${libdir}/xorg/modules/ || :
        rm -rf ${D}${libdir}/xorg/modules/linux
}
